(()=>()=>{const redirectLinks=items=>{if(0!==items.attr("href").indexOf("watchlater")){const watchlaterList=items.map((_,it)=>"https://www.bilibili.com/"+$(it).attr("href").match(/av[\d]+/)[0]);items.each((index,it)=>$(it).attr("href",watchlaterList[index]).attr("target","_blank"))}};if(waitForQuery()(()=>$(".av-item>a"),it=>it.length>0,items=>redirectLinks(items)),waitForQuery()(()=>$("div.watch-later-m>ul>div>li>a"),it=>it.length>0,items=>redirectLinks(items)),waitForQuery()(()=>$(".read-more.mr"),it=>it.length>0,it=>it.remove()),waitForQuery()(()=>$(".read-more-grp>.read-more"),it=>it.length>0,it=>it.css({float:"none",width:"auto"})),-1!==document.URL.indexOf("watchlater")&&document.URL.match(/av[\d]+/)){const av=document.URL.match(/av[\d]+/)[0];av&&document.URL.replace(`https://www.bilibili.com/${av}`)}})();