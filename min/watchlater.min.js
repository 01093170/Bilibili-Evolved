(()=>{return()=>{const e=e=>{const t=e.match(/(av[\d]+)\/p([\d]+)/);if(t){return`https://www.bilibili.com/video/${t[1]}/?p=${t[2]}`}else{return null}};const t=t=>{if(t.attr("href").indexOf("watchlater")!==0){const r=t.map((t,r)=>{const a=$(r).attr("href");if(a){return e(a)}return"javascript:;"});t.each((e,t)=>$(t).attr("href",r[e]).attr("target","_blank"))}};SpinQuery.any(()=>$(".watch-later-list"),()=>{Observer.subtree(".watch-later-list",()=>{new SpinQuery(()=>document.URL.match(/(av[\d]+)\/p([\d]+)/),e=>e&&document.URL.indexOf("watchlater")!==-1,()=>{const t=e(document.URL);if(t!==null){window.location.replace(t)}}).start();SpinQuery.any(()=>$(".av-pic"),e=>t(e))})});SpinQuery.any(()=>$("li.nav-item[report-id*=watchlater]"),()=>{Observer.subtree("li.nav-item[report-id*=watchlater]",()=>{SpinQuery.any(()=>$(".av-item>a"),e=>t(e));SpinQuery.any(()=>$(".av-about>a"),e=>t(e));SpinQuery.any(()=>$("div.watch-later-m>ul>div>li>a"),e=>t(e));SpinQuery.any(()=>$(".read-more.mr"),e=>e.remove());SpinQuery.any(()=>$(".read-more-grp>.read-more"),e=>e.css({float:"none",width:"auto"}))})})}})();