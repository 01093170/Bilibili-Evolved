(()=>{return()=>{const t=t=>{const a=t.match(/(av[\d]+)\/p([\d]+)/);if(a){return`https://www.bilibili.com/video/${a[1]}/?p=${a[2]}`}else{return"javascript:;"}};const a=a=>{if(a.attr("href").match(/.*watchlater.*|javascript:;/g)){const e=a.map((a,e)=>{const r=$(e).attr("href");if(r){return t(r)}return"javascript:;"});a.each((t,a)=>$(a).attr("href",e[t]).attr("target","_blank"))}};SpinQuery.any(()=>$(".watch-later-list"),()=>{Observer.subtree(".watch-later-list",()=>{new SpinQuery(()=>document.URL.match(/(av[\d]+)\/p([\d]+)/),t=>t&&document.URL.indexOf("watchlater")!==-1,()=>{const a=t(document.URL);if(a!==null){window.location.replace(a)}}).start();SpinQuery.any(()=>$(".av-pic"),t=>a(t))})});SpinQuery.any(()=>$("li.nav-item[report-id*=watchlater]"),()=>{Observer.subtree("li.nav-item[report-id*=watchlater]",()=>{SpinQuery.any(()=>$(".av-item>a"),t=>a(t));SpinQuery.any(()=>$(".av-about>a"),t=>a(t));SpinQuery.any(()=>$("div.watch-later-m>ul>div>li>a"),t=>a(t));SpinQuery.any(()=>$(".read-more.mr"),t=>t.remove());SpinQuery.any(()=>$(".read-more-grp>.read-more"),t=>t.css({float:"none",width:"auto"}))})})}})();