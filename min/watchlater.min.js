(()=>{return()=>{const t=t=>{const e=t.match(/(av[\d]+)\/p([\d]+)/);if(e){return`https://www.bilibili.com/video/${e[1]}/?p=${e[2]}`}else{return"javascript:;"}};const e=e=>{const r=e.map((e,r)=>{const a=$(r).attr("href");if(a&&a.match(/.*watchlater.*|javascript:;/g)){return t(a)}return"javascript:;"});e.each((t,e)=>$(e).attr("href",r[t]).attr("target","_blank"))};const r=(...t)=>{for(const r of t){SpinQuery.any(()=>$(r),t=>e(t))}};SpinQuery.any(()=>$(".watch-later-list"),()=>{(Observer.childListSubtree||Observer.subtree)("#viewlater-app",()=>{SpinQuery.condition(()=>document.URL.match(/(av[\d]+)\/p([\d]+)/),t=>t&&document.URL.indexOf("watchlater")!==-1,()=>{const e=t(document.URL);if(e!==null){window.location.replace(e)}});r(".av-pic",".av-about>a")})});SpinQuery.any(()=>$("li.nav-item[report-id*=watchlater]"),()=>{(Observer.childListSubtree||Observer.subtree)("li.nav-item[report-id*=watchlater]",()=>{r(".av-item>a",".av-about>a","div.watch-later-m>ul>div>li>a");SpinQuery.any(()=>$(".read-more.mr"),t=>t.remove());SpinQuery.any(()=>$(".read-more-grp>.read-more"),t=>t.css({float:"none",width:"auto"}))})})}})();