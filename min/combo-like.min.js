(()=>{return(e,n)=>{let t=false;async function i(){const[e]=await SpinQuery.any(()=>document.querySelectorAll("div.ops>span.like"));t=true;e.click()}async function c(){const[n]=await SpinQuery.any(()=>document.querySelectorAll("div.ops>span.coin"));const t=$(".coin-operated-m").children().filter((e,n)=>n.innerText==="2硬币").length!==0;const i=(()=>{if(e.doubleCoins&&t){return 2}else{return 1}})();n.click();const c=await SpinQuery.any(()=>$(".mc-box"));const o=c.filter((e,n)=>n.innerText.indexOf(i)!==-1)[0];o.click();const l=$(".bi-btn").filter((e,n)=>n.innerText==="确定")[0];l.click()}async function o(){const[e]=await SpinQuery.any(()=>document.querySelectorAll("div.ops>span.collect"));e.click();const n=await SpinQuery.any(()=>$(".group-list label:has(input)"));const t=n.filter((e,n)=>n.innerText.indexOf("默认收藏夹")!==-1).find("input")[0];const i=document.createEvent("HTMLEvents");i.initEvent("change",true,true);t.checked=!t.checked;t.dispatchEvent(i);const c=$(".btn.submit-move")[0];c.disabled=false;c.click()}async function l(){console.log("combo like");n.applyImportantStyleFromText(`<style id="combo-like-temp-style">\n                .bili-dialog-m\n                {\n                    display: none !important;\n                }\n            </style>`);await i();await c();await o();$("#combo-like-temp-style").remove()}(async()=>{const[e]=await SpinQuery.any(()=>document.querySelectorAll("div.ops>span.like"));e.style.userSelect="none";const n=2e3;e.addEventListener("pointerdown",e=>{t=true;if(e.type==="touch"){e.preventDefault()}setTimeout(()=>{if(t===true){t=false;l()}},n)});e.addEventListener("click",e=>{if(t===false){e.preventDefault();e.stopImmediatePropagation()}else{t=false}});e.addEventListener("touchend",e=>{if(t===false){e.preventDefault()}})})();return{widget:{content:`\n                    <button\n                        class="gui-settings-flat-button"\n                        id="combo-like">\n                        <i class="icon-like"></i>\n                        <span>素质三连</span>\n                    </button>`,condition:async()=>{const e=await SpinQuery.any(()=>document.querySelectorAll("div.ops>span.like"));return e!==undefined},success:()=>{$("#combo-like").on("click",()=>{l()})}}}}})();