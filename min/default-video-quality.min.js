(()=>{return(e,a)=>{(async()=>{const a=[{name:"1080P+/60",value:116},{name:"720P+/60",value:74},{name:"1080P",value:80},{name:"720P",value:64},{name:"480P",value:32},{name:"360P",value:15},{name:"自动",value:0}];const i=await SpinQuery.any(()=>$(".gui-settings-dropdown:has(input[key=defaultVideoQuality])"));const n=i.find("ul");const t=i.find("input");a.forEach(e=>{$(`<li>${e.name}</li>`).appendTo(n).on("click",()=>{t.val(e.name).trigger("input").change()})});const l=await SpinQuery.condition(()=>$(".bilibili-player-video-quality-menu .bui-select-list>li.bui-select-item"),e=>e.length>0&&$("li.profile-info").length>0);const[u]=a.filter(a=>a.name===e.defaultVideoQuality).map(e=>e.value);l.each((e,a)=>{if(parseInt(a.getAttribute("data-value"))===u){a.click()}})})()}})();