(()=>{return(e,o)=>{(async()=>{const e=await SpinQuery.select(()=>document.querySelector(`input[key=defaultPlayerLayout]`));const o=await SpinQuery.select(()=>document.querySelector(`input[key=defaultBangumiLayout]`));if(!e||!o){logError("无法加载播放器布局选项.");return}class t{setCookie(e,o){document.cookie=`${e}=${o};path=/;domain=.bilibili.com;max-age=31536000`}clearCookie(e){document.cookie=`${e}=;path=/;domain=.bilibili.com;max-age=0`}useNewLayout(){}useOldLayout(){}setLayout(e){if(e){this.useNewLayout()}else{this.useOldLayout()}}}class s extends t{constructor(){super();this.cookieKey="stardustvideo"}useNewLayout(){this.setCookie(this.cookieKey,1)}useOldLayout(){this.setCookie(this.cookieKey,-1)}}class i extends t{constructor(){super();this.cookieKey="stardustpgcv"}useNewLayout(){this.setCookie(this.cookieKey,"0606")}useOldLayout(){this.clearCookie(this.cookieKey)}}const u=new s;$(e).on("change",()=>{u.setLayout(e.value==="新版")});const a=new i;$(o).on("change",()=>{a.setLayout(o.value==="新版")})})()}})();