(()=>{return(e,t)=>{(async()=>{const t=await SpinQuery.select(()=>document.querySelector(`input[key=defaultPlayerLayout]`));const o=await SpinQuery.select(()=>document.querySelector(`input[key=defaultBangumiLayout]`));if(!t||!o){logError("无法加载播放器布局选项.");return}class s{setCookie(e,t){document.cookie=`${e}=${t};path=/;domain=.bilibili.com;max-age=31536000`}clearCookie(e){document.cookie=`${e}=;path=/;domain=.bilibili.com;max-age=0`}getValue(e){return document.cookie.replace(new RegExp(`(?:(?:^|.*;\\s*)${e}\\s*\\=\\s*([^;]*).*$)|^.*$`),"$1")}useNewLayout(){}useOldLayout(){}setLayout(e){if(e){this.useNewLayout()}else{this.useOldLayout()}}}class i extends s{checkCookies(){const t=this.getValue(this.cookieKey);if(t===""||parseInt(t)<0&&e.defaultPlayerLayout!=="旧版"){this.useNewLayout()}else if(e.defaultPlayerLayout!=="新版"){this.useOldLayout()}}constructor(){super();this.cookieKey="stardustvideo";this.checkCookies()}useNewLayout(){this.setCookie(this.cookieKey,1)}useOldLayout(){this.setCookie(this.cookieKey,-1)}}class u extends s{checkCookies(){const t=this.getValue(this.cookieKey);if(t===""||parseInt(t)<=0&&e.defaultBangumiLayout!=="旧版"){this.useNewLayout()}else if(e.defaultBangumiLayout!=="新版"){this.useOldLayout()}}constructor(){super();this.cookieKey="stardustpgcv";this.checkCookies()}useNewLayout(){this.setCookie(this.cookieKey,"0606")}useOldLayout(){this.setCookie(this.cookieKey,0)}}const a=new i;$(t).on("input",()=>{a.setLayout(t.value==="新版")});const c=new u;$(o).on("input",()=>{c.setLayout(o.value==="新版")})})()}})();