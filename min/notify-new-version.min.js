(()=>{return(e,n)=>{const t={less:-1,equal:0,greater:1,incomparable:NaN};class s{constructor(e){this.parts=e.split(".").map(e=>parseInt(e));this.versionString=e}compareTo(e){for(let n=0;n<this.parts.length;++n){if(e.parts.length===n){return t.greater}if(this.parts[n]===e.parts[n]){continue}if(this.parts[n]>e.parts[n]){return t.greater}return t.less}if(this.parts.length!==e.parts.length){return t.less}return t.equal}greaterThan(e){return this.compareTo(e)===t.greater}lessThan(e){return this.compareTo(e)===t.less}equals(e){return this.compareTo(e)===t.equal}}const r=new s(n.data.latestVersion.text);const i=new s(e.currentVersion);if(r.greaterThan(i)){const n=`新版本${r.versionString}已发布.  <a id="new-version-link" class="link" href="${e.latestVersionLink}">安装</a><a class="link" target="_blank"   href="https://github.com/the1812/Bilibili-Evolved/releases">查看</a>`;const t=Toast.info(n,"检查更新");$("#new-version-link").on("click",()=>t&&t.dismiss());return{widget:{content:`\n                        <button\n                            class="gui-settings-flat-button"\n                            id="new-version-update">\n                            <a href="${e.latestVersionLink}" style="display:none"></a>\n                            <i class="icon-update"></i>\n                            <span>安装更新</span>\n                        </button>\n                        <button\n                            class="gui-settings-flat-button"\n                            id="new-version-info">\n                            <a target="blank" style="display:none" href="https://github.com/the1812/Bilibili-Evolved/releases"></a>\n                            <i class="icon-info"></i>\n                            <span>查看更新</span>\n                        </button>\n                    `,success:()=>{$("#new-version-update").on("click",()=>document.querySelector("#new-version-update a").click());$("#new-version-info").on("click",()=>document.querySelector("#new-version-info a").click())}}}}}})();