(()=>{return(t,n)=>{const e={less:-1,equal:0,greater:1,incomparable:NaN};class s{constructor(t){this.parts=t.split(".").map(t=>parseInt(t));this.versionString=t}compareTo(t){for(let n=0;n<this.parts.length;++n){if(t.parts.length===n){return e.greater}if(this.parts[n]===t.parts[n]){continue}if(this.parts[n]>t.parts[n]){return e.greater}return e.less}if(this.parts.length!==t.parts.length){return e.less}return e.equal}greaterThan(t){return this.compareTo(t)===e.greater}lessThan(t){return this.compareTo(t)===e.less}equals(t){return this.compareTo(t)===e.equal}}const i=new s(n.data.latestVersion.text);const a=new s(t.currentVersion);if(i.greaterThan(a)){return{settingsWidget:{after:()=>$(".gui-settings-content"),content:`<div class="gui-settings-footer${t.blurSettingsPanel?" blur":""}">\n                            <span class="gui-settings-label">新版本${i.versionString}已发布.</span>\n                            <a href="${t.latestVersionLink}">\n                                <button\n                                    class="gui-settings-button"\n                                    id="new-version-update">\n                                    安装\n                                </button>\n                            </a>\n                            <a target="blank"  href="https://github.com/the1812/Bilibili-Evolved/releases">\n                                <button\n                                    class="gui-settings-button">\n                                    查看\n                                </button>\n                            </a>\n                        </div>`,success:()=>{const n=`新版本${i.versionString}已发布.  <a class="link" href="${t.latestVersionLink}">安装</a><a class="link" target="_blank"   href="https://github.com/the1812/Bilibili-Evolved/releases">查看</a>`;Toast.info(n,"检查更新")}},widget:{content:`\n                        <button\n                            class="gui-settings-flat-button"\n                            id="new-version-update">\n                            <a href="${t.latestVersionLink}" style="display:none"></a>\n                            <i class="icon-update"></i>\n                            <span>安装更新</span>\n                        </button>\n                        <button\n                            class="gui-settings-flat-button"\n                            id="new-version-info">\n                            <a target="blank" style="display:none" href="https://github.com/the1812/Bilibili-Evolved/releases"></a>\n                            <i class="icon-info"></i>\n                            <span>查看更新</span>\n                        </button>\n                    `,success:()=>{const n=`新版本${i.versionString}已发布.  <a class="link" href="${t.latestVersionLink}">安装</a><a class="link" target="_blank"   href="https://github.com/the1812/Bilibili-Evolved/releases">查看</a>`;Toast.info(n,"检查更新");$("#new-version-update").on("click",()=>document.querySelector("#new-version-update a").click());$("#new-version-info").on("click",()=>document.querySelector("#new-version-info a").click())}}}}}})();