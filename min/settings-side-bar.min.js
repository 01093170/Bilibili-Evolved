(()=>{return(e,t)=>{if(document.querySelector(".gui-settings-icon-panel")===null){document.body.insertAdjacentHTML("beforeend",`\n    <div class='gui-settings-icon-panel icons-enabled'>\n        <div class='gui-settings-widgets' title='附加功能'>\n            <i class="icon-widgets"></i>\n        </div>\n        <div class='gui-settings' title='设置'>\n            <i class="icon-settings"></i>\n        </div>\n    </div>`);document.querySelector(".gui-settings").addEventListener("click",e=>{if(e.shiftKey===false){document.querySelectorAll(".gui-settings-box,.gui-settings-mask").forEach(e=>e.classList.add("opened"))}else{document.querySelectorAll(".bilibili-evolved-about,.gui-settings-mask").forEach(e=>e.classList.add("opened"));raiseEvent(document.querySelector(".bilibili-evolved-about"),"be:about-load")}});document.querySelector(".gui-settings-widgets").addEventListener("click",()=>{document.querySelectorAll(".gui-settings-widgets-box,.gui-settings-mask").forEach(e=>e.classList.add("opened"))});const e=dq(".gui-settings-icon-panel .gui-settings>i");let t=false;let i=false;const s=()=>{e.classList.remove("icon-info");e.classList.add("icon-settings");e.parentElement.title="设置";t=false;i=false};const n=()=>{e.classList.remove("icon-settings");e.classList.add("icon-info");e.parentElement.title="关于";if(!t){document.body.addEventListener("keyup",s,{once:true});t=true}if(!i){window.addEventListener("blur",s,{once:true});i=true}};document.body.addEventListener("keydown",e=>{if(document.activeElement&&["input","textarea"].includes(document.activeElement.nodeName.toLowerCase())){return}if(e.shiftKey===true){n()}})}const i=(t=e.sideBarOffset)=>{document.body.style.setProperty("--side-bar-offset",t+"%")};addSettingsListener("sideBarOffset",i);i()}})();