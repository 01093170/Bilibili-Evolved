(()=>{return(i,l)=>{(async()=>{const l=["https://www.bilibili.com/bangumi/","https://www.bilibili.com/video/"];if(!l.some(i=>document.URL.startsWith(i))){return}if(i.touchVideoPlayerDoubleTapControl){Toast.info("在开启了<span>播放器触摸支持-启用双击控制</span>后, <span>双击全屏</span>功能将无效.","提示");i.doubleClickFullscreen=false;return}await SpinQuery.unsafeJquery();const n=await SpinQuery.condition(()=>dq(".bilibili-player-area"),i=>i!==null&&unsafeWindow.$(".bilibili-player-video").data("events"));if(n===null){return}const e="double-click-fullscreen";if(!n.classList.contains(e)){n.classList.add(e);const i=unsafeWindow.$(".bilibili-player-video");const l=new DoubleClickEvent(()=>dq(".bilibili-player-video-btn-fullscreen").click(),()=>{});l.bind(i[0])}})()}})();