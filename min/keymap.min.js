(()=>{return(e,i)=>{const t=["https://www.bilibili.com/bangumi/","https://www.bilibili.com/video/"];if(t.some(e=>document.URL.startsWith(e))){const e={w:".bilibili-player-video-web-fullscreen",t:".bilibili-player-video-btn-widescreen",r:".bilibili-player-video-btn-repeat",m:".bilibili-player-video-btn-volume .bilibili-player-iconfont-volume",l:".video-toolbar .like",c:".video-toolbar .coin,.tool-bar .coin-info",s:".video-toolbar .collect"};document.body.addEventListener("keydown",i=>{if(document.activeElement&&["input","textarea"].includes(document.activeElement.nodeName.toLowerCase())){return}const t=i.key.toLowerCase();const o=!i.shiftKey&&!i.altKey&&!i.ctrlKey;if(t in e&&o){const o=dq(e[t]);if(!o){return}i.stopPropagation();i.preventDefault();o.click()}else if(t==="d"&&o){const e=dq(".bilibili-player-video-danmaku-switch input");if(!e){return}i.stopPropagation();i.preventDefault();e.checked=!e.checked;raiseEvent(e,"change")}else if(i.shiftKey){const e=dq(".bilibili-player-video video");if(e===null){return}i.stopPropagation();i.preventDefault();const o=[.5,.75,1,1.25,1.5,2];if(t===">"||t==="ArrowUp".toLowerCase()){e.playbackRate=o.find(i=>i>e.playbackRate)||o[o.length-1]}else if(t==="<"||t==="ArrowDown".toLowerCase()){e.playbackRate=o.find(i=>i<e.playbackRate)||o[0]}else if(t==="?"){e.playbackRate=1}else if(t==="w"){const e=dq(".video-toolbar .ops .watchlater,.more-ops-list .ops-watch-later");if(e!==null){e.click()}}}})}}})();