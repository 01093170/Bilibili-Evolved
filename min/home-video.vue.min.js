(()=>{return(i,a)=>{const d=`<div class=home-video><div class=loading v-if=loading><i class="mdi mdi-18px mdi-loading mdi-spin"></i>加载中...</div><div class=cards v-else-if=cards.length><a class=home-video-card v-for="card in cards":key=card.id target=_blank :href="'https://www.bilibili.com/av' + card.aid"><div class=cover-container><dpi-img class=cover :src=card.coverUrl :size="{height: 240}"></dpi-img><div class=duration>{{card.durationText}}</div><div class=topics><a class=topic v-for="topic of card.topics":key=topic.id target=_blank :href="'https://t.bilibili.com/topic/name/' + card.name + '/feed'">{{topic.name}}</a></div><div class=watchlater></div></div><h1 class=title>{{card.title}}</h1><pre class=description>{{card.description}}</pre><dpi-img class=face :src=card.upFaceUrl :size=36></dpi-img><div class=up>{{card.upName}}</div><div class=stats>{{card.playCount}} {{card.danmakuCount}}</div></a></div><div class=empty v-else>空空如也哦 =￣ω￣=</div></div>`;return{export:Object.assign({template:d},{components:{"dpi-img":()=>a.importAsync("dpi-img.vue")},data(){return{cards:[],loading:true}},async mounted(){try{const i=await Ajax.getJsonWithCredentials(`https://api.vc.bilibili.com/dynamic_svr/v1/dynamic_svr/dynamic_new?uid=${getUID()}&type_list=8`);if(i.code!==0){Toast.error(i.message,"视频动态",3e3);return}this.cards=i.data.cards.map(i=>{const a=JSON.parse(i.card);const d=_.get(a,"display.topic_info.topic_details",[]).map(i=>{return{id:i.topic_id,name:i.topic_name}});return{id:i.desc.dynamic_id_str,aid:a.aid,title:a.title,upName:i.desc.user_profile.info.uname,upFaceUrl:i.desc.user_profile.info.face,coverUrl:a.pic,description:a.desc,topics:d,duration:a.duration,durationText:formatDuration(a.duration,0),playCount:a.stat.view,danmakuCount:a.stat.danmaku}})}finally{this.loading=false}}})}}})();