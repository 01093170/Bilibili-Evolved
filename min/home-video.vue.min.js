(()=>{return(a,i)=>{const t=`<div class=home-video><div class=loading v-if=loading><i class="mdi mdi-18px mdi-loading mdi-spin"></i>加载中...</div><div class=cards v-else-if=cards.length><video-card v-for="card of cards":key=card.id :data=card></video-card></div><div class=empty v-else>空空如也哦 =￣ω￣=</div></div>`;i.applyStyleFromText(`.home-video .cards{display:flex;flex-wrap:wrap;align-items:center}`,"home-video-style");return{export:Object.assign({template:t},{components:{VideoCard:()=>i.importAsync("video-card.vue")},data(){return{cards:[],loading:true}},async mounted(){try{const a=await Ajax.getJsonWithCredentials(`https://api.vc.bilibili.com/dynamic_svr/v1/dynamic_svr/dynamic_new?uid=${getUID()}&type_list=8`);const{getWatchlaterList:t}=await i.importAsync("watchlater-api");const e=await t();if(a.code!==0){throw new Error(a.message)}this.cards=a.data.cards.map(a=>{const i=JSON.parse(a.card);const t=_.get(a,"display.topic_info.topic_details",[]).map(a=>{return{id:a.topic_id,name:a.topic_name}});return{id:a.desc.dynamic_id_str,aid:i.aid,title:i.title,upID:a.desc.user_profile.info.uid,upName:a.desc.user_profile.info.uname,upFaceUrl:a.desc.user_profile.info.face,coverUrl:i.pic,description:i.desc,timestamp:a.timestamp,time:new Date(a.timestamp*1e3),topics:t,dynamic:i.dynamic,like:formatCount(a.desc.like),duration:i.duration,durationText:formatDuration(i.duration,0),playCount:formatCount(i.stat.view),danmakuCount:formatCount(i.stat.danmaku),watchlater:e.includes(i.aid)}})}catch(a){Toast.error(a.message,"视频动态",3e3)}finally{this.loading=false}}})}}})();