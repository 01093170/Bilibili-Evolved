(()=>{return(e,t)=>{(async()=>{const s={"日本語":"ja-JP",English:"en-US"};const{map:a}=await t.importAsync(`i18n.${s[e.i18nLanguage]}`);class n{accepts(e){return e.nodeType===Node.ELEMENT_NODE}getValue(e){return e.nodeValue}setValue(e,t){e.nodeValue=t}getElement(e){return e}translate(e){const t=this.getValue(e);if(!t||typeof t!=="string"){return}const s=a.get(t.trim());if(s===undefined){return}if(typeof s==="string"){this.setValue(e,s)}else if(Array.isArray(s)){let t=null;for(const a of s){if(typeof a==="string"){t=a}else{const{text:s,selector:n}=a;if(this.getElement(e).matches(n)){t=s}}}if(t!==null){this.setValue(e,t)}}else{const{text:t,selector:a}=s;if(this.getElement(e).matches(a)){this.setValue(e,t)}}}static walk(e,t){const s=document.createTreeWalker(e,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,null,false);let a=s.nextNode();while(a){t(a);a=s.nextNode()}}static translate(e){if(e.nodeType===Node.TEXT_NODE){n.textNode.translate(e);return}n.walk(e,e=>{for(const t of n.allTranslators){if(t.accepts(e)){t.translate(e)}}})}static translateCssMatches(){const e=a.get("*");if(!e){return}for(const{selector:t,text:s}of e){const e=document.querySelector(t);if(e){[...e.childNodes].filter(e=>e.nodeType===Node.TEXT_NODE).forEach(e=>e.nodeValue=s)}}}}class r extends n{accepts(e){return e.nodeType===Node.TEXT_NODE}getElement(e){return e.parentElement}}class l extends n{getValue(e){return e.getAttribute("title")}setValue(e,t){e.setAttribute("title",t)}}class o extends n{accepts(e){return e.nodeName==="INPUT"&&e.type.toUpperCase()==="TEXT"||e.nodeName==="TEXTAREA"}getValue(e){return e.getAttribute("placeholder")}setValue(e,t){e.setAttribute("placeholder",t)}}n.textNode=new r;n.title=new l;n.placeholder=new o;n.allTranslators=[n.textNode,n.title,n.placeholder];n.translate(document.body);n.translateCssMatches();Observer.childListSubtree("body",e=>{e.forEach(e=>{if(e.addedNodes.length>0){n.translateCssMatches()}e.addedNodes.forEach(e=>{n.translate(e)})})})})()}})();