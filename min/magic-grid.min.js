(()=>{return(t,e)=>{const i=function(t){const e=25;if(!t){throw new Error("No config object has been provided.")}if(typeof t.useTransform!=="boolean"){t.useTransform=true}if(typeof t.gutter!=="number"){t.gutter=e}if(!t.container){s("container")}if(!t.items&&!t.static){s("items or static")}};const s=function(t){throw new Error("Missing property '"+t+"' in MagicGrid config")};const n=function(t){let e=t[0];for(const i of t){if(i.height<e.height){e=i}}return e};class o{constructor(t){i(t);if(t.container instanceof HTMLElement){this.container=t.container;this.containerClass=t.container.className}else{this.containerClass=t.container;this.container=document.querySelector(t.container)}this.items=this.container.children;this.static=t.static||false;this.size=t.items;this.gutter=t.gutter;this.maxColumns=t.maxColumns||false;this.useMin=t.useMin||false;this.useTransform=t.useTransform;this.animate=t.animate||false;this.started=false;this.init()}init(){if(!this.ready()||this.started){return}this.container.style.position="relative";for(let t=0;t<this.items.length;t++){const e=this.items[t].style;e.position="absolute";if(this.animate){e.transition=(this.useTransform?"transform":"top, left")+" 0.2s ease"}}this.started=true}colWidth(){return this.items[0].getBoundingClientRect().width+this.gutter}setup(){const t=this.container.getBoundingClientRect().width;const e=this.colWidth();let i=Math.floor(t/e)||1;const s=[];if(this.maxColumns&&i>this.maxColumns){i=this.maxColumns}for(let t=0;t<i;t++){s[t]={height:0,index:t}}const n=t-i*e+this.gutter;return{cols:s,wSpace:n}}nextCol(t,e){if(this.useMin){return n(t)}return t[e%t.length]}positionItems(){const t=this.setup();const e=t.cols;let i=t.wSpace;let s=0;const n=this.colWidth();i=Math.floor(i/2);for(let t=0;t<this.items.length;t++){const o=this.nextCol(e,t);const r=this.items[t];const h=o.height?this.gutter:0;const a=o.index*n+i+"px";const c=o.height+h+"px";if(this.useTransform){r.style.transform="translate("+a+", "+c+")"}else{r.style.top=c;r.style.left=a}o.height+=r.getBoundingClientRect().height+h;if(o.height>s){s=o.height}}this.container.style.height=s+"px"}ready(){if(this.static){return true}return this.items.length>=this.size}getReady(){const t=setInterval(()=>{this.container=document.querySelector(this.containerClass);this.items=this.container.children;if(this.ready()){clearInterval(t);this.init();this.listen()}},100)}listen(){if(this.ready()){let t;window.addEventListener("resize",()=>{if(!t){t=setTimeout(()=>{this.positionItems();t=null},200)}});this.positionItems()}else{this.getReady()}}}return{export:{MagicGrid:o}}}})();