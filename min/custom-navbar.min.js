(()=>{return(t,e)=>{if(isIframe()){return}const s=["/www.bilibili.com"];if(!s.some(t=>document.URL.includes(t))){return}class o{constructor(){this.html=``;this.popupHtml=``;this.flex=`0 0 auto`;this.disabled=false;this.showPopup=false}}class n extends o{constructor(){super();this.flex="1 0 auto";this.disabled=true}}class i extends o{constructor(){super();this.html=`<a href="https://www.bilibili.com/"><i class="custom-navbar-iconfont custom-navbar-icon-logo"></i></a>`}}class a extends o{constructor(){super();this.html=`<a href="https://www.bilibili.com/">主站</a>`;this.popupHtml=`\n        <ul id="custom-navbar-home-popup">\n            <li class="category-item" v-for="item of info">\n                {{item[0]}}<span>{{item[1]}}</span>\n            </li>\n        </ul>\n        `;this.getOnlineInfo().then(t=>{new Vue({el:"#custom-navbar-home-popup",data:{info:Object.entries(t)}})})}async getOnlineInfo(){const t=await Ajax.getJson("https://api.bilibili.com/x/web-interface/online");if(parseInt(t.code)!==0){throw new Error(`[自定义顶栏] 分区投稿信息获取失败: ${t.message}`)}const e=t.data.region_count;await SpinQuery.select("#custom-navbar-home-popup");return{"动画":e[1],"番剧":e[13],"国创":e[167],"音乐":e[3],"舞蹈":e[129],"游戏":e[4],"生活":e[160],"鬼畜":e[119],"时尚":e[155],"广告":e[165],"娱乐":e[5],"影视":e[181],"科技":e[36],"数码":e[188],"放映厅":e[177]+e[23]}}}(async()=>{const s=await e.importAsync("customNavbarHtml");document.body.insertAdjacentHTML("beforeend",s);const o=document.querySelector(".custom-navbar");for(const[e,s]of Object.entries(t.customNavbarSettings)){if(s===true){o.classList.add(e)}}if(t.useDarkStyle){o.classList.add("dark")}const c=[new i,new a,new n];new Vue({el:o,data:{components:c},methods:{togglePopup(t){t.showPopup=!t.showPopup}}})})()}})();