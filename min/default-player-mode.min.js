(()=>{return(e,i)=>{const n=[{name:"常规"},{name:"宽屏",actionButtonSelector:".bilibili-player-video-btn-widescreen",condition:()=>$("#bilibiliPlayer.mode-widescreen").length===0},{name:"网页全屏",actionButtonSelector:".bilibili-player-video-web-fullscreen",condition:()=>$("#bilibiliPlayer.mode-webfullscreen").length===0}];SpinQuery.any(()=>$(".gui-settings-dropdown:has(input[key=defaultPlayerMode])"),e=>{const i=e.find("ul");const t=e.find("input");Object.values(n).forEach(e=>{$(`<li>${e.name}</li>`).appendTo(i).on("click",()=>{t.val(e.name).trigger("input").change()})})});new SpinQuery(()=>$(".bilibili-player-video"),e=>e.length>0&&$("video").length>0&&$("video").prop("duration"),()=>{const i=document.querySelector("video");const t=()=>{const o=n.find(i=>i.name===e.defaultPlayerMode);if(!o){return}if(o.name!=="常规"&&o.condition()){$(o.actionButtonSelector).click()}i.removeEventListener("play",t)};i.addEventListener("play",t)}).start()}})();